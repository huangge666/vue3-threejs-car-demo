import{n as X}from"./vendor.919ab38d.js";import{au as Y}from"./three.module.902524f2.js";var tt=X(Y),n=tt;n.MTLLoader=function(i){this.manager=i!==void 0?i:n.DefaultLoadingManager};n.MTLLoader.prototype={constructor:n.MTLLoader,load:function(i,p,c,l){var f=this,o=new n.FileLoader(this.manager);o.setPath(this.path),o.load(i,function(e){p(f.parse(e))},c,l)},setPath:function(i){return this.path=i,this},setTexturePath:function(i){return this.texturePath=i,this},setBaseUrl:function(i){return console.warn("THREE.MTLLoader: .setBaseUrl() is deprecated. Use .setTexturePath( path ) for texture path or .setPath( path ) for general base path instead."),this.setTexturePath(i)},setCrossOrigin:function(i){return this.crossOrigin=i,this},setMaterialOptions:function(i){return this.materialOptions=i,this},parse:function(i){for(var p=i.split(`
`),c={},l=/\s+/,f={},o=0;o<p.length;o++){var e=p[o];if(e=e.trim(),!(e.length===0||e.charAt(0)==="#")){var r=e.indexOf(" "),t=r>=0?e.substring(0,r):e;t=t.toLowerCase();var s=r>=0?e.substring(r+1):"";if(s=s.trim(),t==="newmtl")c={name:s},f[s]=c;else if(c)if(t==="ka"||t==="kd"||t==="ks"){var a=s.split(l,3);c[t]=[parseFloat(a[0]),parseFloat(a[1]),parseFloat(a[2])]}else c[t]=s}}var h=new n.MTLLoader.MaterialCreator(this.texturePath||this.path,this.materialOptions);return h.setCrossOrigin(this.crossOrigin),h.setManager(this.manager),h.setMaterials(f),h}};n.MTLLoader.MaterialCreator=function(i,p){this.baseUrl=i||"",this.options=p,this.materialsInfo={},this.materials={},this.materialsArray=[],this.nameLookup={},this.side=this.options&&this.options.side?this.options.side:n.FrontSide,this.wrap=this.options&&this.options.wrap?this.options.wrap:n.RepeatWrapping};n.MTLLoader.MaterialCreator.prototype={constructor:n.MTLLoader.MaterialCreator,crossOrigin:"Anonymous",setCrossOrigin:function(i){this.crossOrigin=i},setManager:function(i){this.manager=i},setMaterials:function(i){this.materialsInfo=this.convert(i),this.materials={},this.materialsArray=[],this.nameLookup={}},convert:function(i){if(!this.options)return i;var p={};for(var c in i){var l=i[c],f={};p[c]=f;for(var o in l){var e=!0,r=l[o],t=o.toLowerCase();switch(t){case"kd":case"ka":case"ks":this.options&&this.options.normalizeRGB&&(r=[r[0]/255,r[1]/255,r[2]/255]),this.options&&this.options.ignoreZeroRGBs&&r[0]===0&&r[1]===0&&r[2]===0&&(e=!1);break}e&&(f[t]=r)}}return p},preload:function(){for(var i in this.materialsInfo)this.create(i)},getIndex:function(i){return this.nameLookup[i]},getAsArray:function(){var i=0;for(var p in this.materialsInfo)this.materialsArray[i]=this.create(p),this.nameLookup[p]=i,i++;return this.materialsArray},create:function(i){return this.materials[i]===void 0&&this.createMaterial_(i),this.materials[i]},createMaterial_:function(i){var p=this,c=this.materialsInfo[i],l={name:i,side:this.side};function f(s,a){return typeof a!="string"||a===""?"":/^https?:\/\//i.test(a)?a:s+a}function o(s,a){if(!l[s]){var h=p.getTextureParams(a,l),u=p.loadTexture(f(p.baseUrl,h.url));u.repeat.copy(h.scale),u.offset.copy(h.offset),u.wrapS=p.wrap,u.wrapT=p.wrap,l[s]=u}}for(var e in c){var r=c[e],t;if(r!=="")switch(e.toLowerCase()){case"kd":l.color=new n.Color().fromArray(r);break;case"ks":l.specular=new n.Color().fromArray(r);break;case"map_kd":o("map",r);break;case"map_ks":o("specularMap",r);break;case"norm":o("normalMap",r);break;case"map_bump":case"bump":o("bumpMap",r);break;case"ns":l.shininess=parseFloat(r);break;case"d":t=parseFloat(r),t<1&&(l.opacity=t,l.transparent=!0);break;case"tr":t=parseFloat(r),this.options&&this.options.invertTrProperty&&(t=1-t),t>0&&(l.opacity=1-t,l.transparent=!0);break}}return this.materials[i]=new n.MeshPhongMaterial(l),this.materials[i]},getTextureParams:function(i,p){var c={scale:new n.Vector2(1,1),offset:new n.Vector2(0,0)},l=i.split(/\s+/),f;return f=l.indexOf("-bm"),f>=0&&(p.bumpScale=parseFloat(l[f+1]),l.splice(f,2)),f=l.indexOf("-s"),f>=0&&(c.scale.set(parseFloat(l[f+1]),parseFloat(l[f+2])),l.splice(f,4)),f=l.indexOf("-o"),f>=0&&(c.offset.set(parseFloat(l[f+1]),parseFloat(l[f+2])),l.splice(f,4)),c.url=l.join(" ").trim(),c},loadTexture:function(i,p,c,l,f){var o,e=this.manager!==void 0?this.manager:n.DefaultLoadingManager,r=e.getHandler(i);return r===null&&(r=new n.TextureLoader(e)),r.setCrossOrigin&&r.setCrossOrigin(this.crossOrigin),o=r.load(i,c,l,f),p!==void 0&&(o.mapping=p),o}};n.OBJLoader=function(){var i=/^[og]\s*(.+)?/,p=/^mtllib /,c=/^usemtl /;function l(){var o={objects:[],object:{},vertices:[],normals:[],colors:[],uvs:[],materialLibraries:[],startObject:function(e,r){if(this.object&&this.object.fromDeclaration===!1){this.object.name=e,this.object.fromDeclaration=r!==!1;return}var t=this.object&&typeof this.object.currentMaterial=="function"?this.object.currentMaterial():void 0;if(this.object&&typeof this.object._finalize=="function"&&this.object._finalize(!0),this.object={name:e||"",fromDeclaration:r!==!1,geometry:{vertices:[],normals:[],colors:[],uvs:[]},materials:[],smooth:!0,startMaterial:function(a,h){var u=this._finalize(!1);u&&(u.inherited||u.groupCount<=0)&&this.materials.splice(u.index,1);var m={index:this.materials.length,name:a||"",mtllib:Array.isArray(h)&&h.length>0?h[h.length-1]:"",smooth:u!==void 0?u.smooth:this.smooth,groupStart:u!==void 0?u.groupEnd:0,groupEnd:-1,groupCount:-1,inherited:!1,clone:function(M){var d={index:typeof M=="number"?M:this.index,name:this.name,mtllib:this.mtllib,smooth:this.smooth,groupStart:0,groupEnd:-1,groupCount:-1,inherited:!1};return d.clone=this.clone.bind(d),d}};return this.materials.push(m),m},currentMaterial:function(){if(this.materials.length>0)return this.materials[this.materials.length-1]},_finalize:function(a){var h=this.currentMaterial();if(h&&h.groupEnd===-1&&(h.groupEnd=this.geometry.vertices.length/3,h.groupCount=h.groupEnd-h.groupStart,h.inherited=!1),a&&this.materials.length>1)for(var u=this.materials.length-1;u>=0;u--)this.materials[u].groupCount<=0&&this.materials.splice(u,1);return a&&this.materials.length===0&&this.materials.push({name:"",smooth:this.smooth}),h}},t&&t.name&&typeof t.clone=="function"){var s=t.clone(0);s.inherited=!0,this.object.materials.push(s)}this.objects.push(this.object)},finalize:function(){this.object&&typeof this.object._finalize=="function"&&this.object._finalize(!0)},parseVertexIndex:function(e,r){var t=parseInt(e,10);return(t>=0?t-1:t+r/3)*3},parseNormalIndex:function(e,r){var t=parseInt(e,10);return(t>=0?t-1:t+r/3)*3},parseUVIndex:function(e,r){var t=parseInt(e,10);return(t>=0?t-1:t+r/2)*2},addVertex:function(e,r,t){var s=this.vertices,a=this.object.geometry.vertices;a.push(s[e+0],s[e+1],s[e+2]),a.push(s[r+0],s[r+1],s[r+2]),a.push(s[t+0],s[t+1],s[t+2])},addVertexPoint:function(e){var r=this.vertices,t=this.object.geometry.vertices;t.push(r[e+0],r[e+1],r[e+2])},addVertexLine:function(e){var r=this.vertices,t=this.object.geometry.vertices;t.push(r[e+0],r[e+1],r[e+2])},addNormal:function(e,r,t){var s=this.normals,a=this.object.geometry.normals;a.push(s[e+0],s[e+1],s[e+2]),a.push(s[r+0],s[r+1],s[r+2]),a.push(s[t+0],s[t+1],s[t+2])},addColor:function(e,r,t){var s=this.colors,a=this.object.geometry.colors;a.push(s[e+0],s[e+1],s[e+2]),a.push(s[r+0],s[r+1],s[r+2]),a.push(s[t+0],s[t+1],s[t+2])},addUV:function(e,r,t){var s=this.uvs,a=this.object.geometry.uvs;a.push(s[e+0],s[e+1]),a.push(s[r+0],s[r+1]),a.push(s[t+0],s[t+1])},addUVLine:function(e){var r=this.uvs,t=this.object.geometry.uvs;t.push(r[e+0],r[e+1])},addFace:function(e,r,t,s,a,h,u,m,M){var d=this.vertices.length,g=this.parseVertexIndex(e,d),j=this.parseVertexIndex(r,d),b=this.parseVertexIndex(t,d);if(this.addVertex(g,j,b),s!==void 0&&s!==""){var L=this.uvs.length;g=this.parseUVIndex(s,L),j=this.parseUVIndex(a,L),b=this.parseUVIndex(h,L),this.addUV(g,j,b)}if(u!==void 0&&u!==""){var A=this.normals.length;g=this.parseNormalIndex(u,A),j=u===m?g:this.parseNormalIndex(m,A),b=u===M?g:this.parseNormalIndex(M,A),this.addNormal(g,j,b)}this.colors.length>0&&this.addColor(g,j,b)},addPointGeometry:function(e){this.object.geometry.type="Points";for(var r=this.vertices.length,t=0,s=e.length;t<s;t++)this.addVertexPoint(this.parseVertexIndex(e[t],r))},addLineGeometry:function(e,r){this.object.geometry.type="Line";for(var t=this.vertices.length,s=this.uvs.length,a=0,h=e.length;a<h;a++)this.addVertexLine(this.parseVertexIndex(e[a],t));for(var u=0,h=r.length;u<h;u++)this.addUVLine(this.parseUVIndex(r[u],s))}};return o.startObject("",!1),o}function f(o){this.manager=o!==void 0?o:n.DefaultLoadingManager,this.materials=null}return f.prototype={constructor:f,load:function(o,e,r,t){var s=this,a=new n.FileLoader(s.manager);a.setPath(this.path),a.load(o,function(h){e(s.parse(h))},r,t)},setPath:function(o){return this.path=o,this},setMaterials:function(o){return this.materials=o,this},parse:function(o){console.time("OBJLoader");var e=new l;o.indexOf(`\r
`)!==-1&&(o=o.replace(/\r\n/g,`
`)),o.indexOf(`\\
`)!==-1&&(o=o.replace(/\\\n/g,""));for(var r=o.split(`
`),t="",s="",a=0,h=[],u=typeof"".trimLeft=="function",m=0,M=r.length;m<M;m++)if(t=r[m],t=u?t.trimLeft():t.trim(),a=t.length,a!==0&&(s=t.charAt(0),s!=="#"))if(s==="v"){var d=t.split(/\s+/);switch(d[0]){case"v":e.vertices.push(parseFloat(d[1]),parseFloat(d[2]),parseFloat(d[3])),d.length===8&&e.colors.push(parseFloat(d[4]),parseFloat(d[5]),parseFloat(d[6]));break;case"vn":e.normals.push(parseFloat(d[1]),parseFloat(d[2]),parseFloat(d[3]));break;case"vt":e.uvs.push(parseFloat(d[1]),parseFloat(d[2]));break}}else if(s==="f"){for(var g=t.substr(1).trim(),j=g.split(/\s+/),b=[],L=0,A=j.length;L<A;L++){var D=j[L];if(D.length>0){var q=D.split("/");b.push(q)}}for(var _=b[0],L=1,A=b.length-1;L<A;L++){var V=b[L],U=b[L+1];e.addFace(_[0],V[0],U[0],_[1],V[1],U[1],_[2],V[2],U[2])}}else if(s==="l"){var E=t.substring(1).trim().split(" "),z=[],H=[];if(t.indexOf("/")===-1)z=E;else for(var S=0,W=E.length;S<W;S++){var I=E[S].split("/");I[0]!==""&&z.push(I[0]),I[1]!==""&&H.push(I[1])}e.addLineGeometry(z,H)}else if(s==="p"){var g=t.substr(1).trim(),Z=g.split(" ");e.addPointGeometry(Z)}else if((h=i.exec(t))!==null){var K=(" "+h[0].substr(1).trim()).substr(1);e.startObject(K)}else if(c.test(t))e.object.startMaterial(t.substring(7).trim(),e.materialLibraries);else if(p.test(t))e.materialLibraries.push(t.substring(7).trim());else if(s==="s"){if(h=t.split(" "),h.length>1){var N=h[1].trim().toLowerCase();e.object.smooth=N!=="0"&&N!=="off"}else e.object.smooth=!0;var v=e.object.currentMaterial();v&&(v.smooth=e.object.smooth)}else{if(t==="\0")continue;throw new Error('THREE.OBJLoader: Unexpected line: "'+t+'"')}e.finalize();var G=new n.Group;G.materialLibraries=[].concat(e.materialLibraries);for(var m=0,M=e.objects.length;m<M;m++){var J=e.objects[m],w=J.geometry,T=J.materials,y=w.type==="Line",k=w.type==="Points",$=!1;if(w.vertices.length!==0){var x=new n.BufferGeometry;x.setAttribute("position",new n.Float32BufferAttribute(w.vertices,3)),w.normals.length>0?x.setAttribute("normal",new n.Float32BufferAttribute(w.normals,3)):x.computeVertexNormals(),w.colors.length>0&&($=!0,x.setAttribute("color",new n.Float32BufferAttribute(w.colors,3))),w.uvs.length>0&&x.setAttribute("uv",new n.Float32BufferAttribute(w.uvs,2));for(var F=[],O=0,R=T.length;O<R;O++){var P=T[O],v=void 0;if(this.materials!==null){if(v=this.materials.create(P.name),y&&v&&!(v instanceof n.LineBasicMaterial)){var B=new n.LineBasicMaterial;B.copy(v),B.lights=!1,v=B}else if(k&&v&&!(v instanceof n.PointsMaterial)){var Q=new n.PointsMaterial({size:10,sizeAttenuation:!1});B.copy(v),v=Q}}v||(y?v=new n.LineBasicMaterial:k?v=new n.PointsMaterial({size:1,sizeAttenuation:!1}):v=new n.MeshPhongMaterial,v.name=P.name),v.flatShading=!P.smooth,v.vertexColors=$?n.VertexColors:n.NoColors,F.push(v)}var C;if(F.length>1){for(var O=0,R=T.length;O<R;O++){var P=T[O];x.addGroup(P.groupStart,P.groupCount,O)}y?C=new n.LineSegments(x,F):k?C=new n.Points(x,F):C=new n.Mesh(x,F)}else y?C=new n.LineSegments(x,F[0]):k?C=new n.Points(x,F[0]):C=new n.Mesh(x,F[0]);C.name=J.name,G.add(C)}}return console.timeEnd("OBJLoader"),G}},f}();var st=n.MTLLoader,it=n.OBJLoader;export{st as M,it as O};
//# sourceMappingURL=index.031127d5.js.map
